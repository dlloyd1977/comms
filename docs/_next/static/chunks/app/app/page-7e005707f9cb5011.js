(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{4269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(2821),s=a(5889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4600:(e,t,a)=>{"use strict";a.d(t,{GlobalProvider:()=>n,P:()=>o});var r=a(5155),s=a(2115),l=a(5392);let i=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{!async function(){try{let n=(await (0,l.X)()).getSupabaseClient(),{data:{user:o}}=await n.auth.getUser();if(o){var e,t,a,r,s,i;let l=o.email,c=((null==(e=o.user_metadata)?void 0:e.nickname)||"").trim()||((null==(t=o.user_metadata)?void 0:t.first_name)||"").trim()||l,h=null!=(s=null==(a=o.user_metadata)?void 0:a.first_name)?s:null,u=null!=(i=null==(r=o.user_metadata)?void 0:r.nickname)?i:null;try{let{data:e}=await n.from("active_members").select("nickname, first_name").eq("email",l).maybeSingle();(null==e?void 0:e.nickname)&&(u=e.nickname),(null==e?void 0:e.first_name)&&(h=e.first_name),c=(u||"").trim()||(h||"").trim()||l}catch(e){console.warn("Profile lookup failed:",e)}d({email:l,id:o.id,registered_at:new Date(o.created_at),first_name:h,nickname:u,display_name:c})}else throw Error("User not found")}catch(e){console.error("Error loading data:",e)}finally{n(!1)}}()},[]),(0,r.jsx)(i.Provider,{value:{loading:a,user:o},children:t})}let o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useGlobal must be used within a GlobalProvider");return e}},5171:(e,t,a)=>{Promise.resolve().then(a.bind(a,8337))},5392:(e,t,a)=>{"use strict";a.d(t,{q:()=>i,createSPASassClient:()=>n,X:()=>o});var r=a(6620),s=function(e){return e.SERVER="server",e.SPA="spa",e}({});class l{async loginEmail(e,t){return this.client.auth.signInWithPassword({email:e,password:t})}async registerEmail(e,t){return this.client.auth.signUp({email:e,password:t})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],t="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let a=localStorage.key(e);(null==a?void 0:a.startsWith(t))&&localStorage.removeItem(a)}for(let e=sessionStorage.length-1;e>=0;e--){let a=sessionStorage.key(e);(null==a?void 0:a.startsWith(t))&&sessionStorage.removeItem(a)}}catch(e){}let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,t,a){return t=e+"/"+(t=t.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(t,a)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,t){return t=e+"/"+t,this.client.storage.from("files").remove([t])}async shareFile(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t=e+"/"+t,this.client.storage.from("files").createSignedUrl(t,a,{download:r})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.client.from("todo_list").select("*").range(e*t-t,e*t-1).order(a);return null!==r&&(s=s.eq("done",r)),s}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,t){this.client=e,this.clientType=t}}function i(){return(0,r.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function n(){return new l(i(),s.SPA)}async function o(){let e=i(),t=await e.auth.getSession();return t.data&&t.data.session||(window.location.href="/auth/login"),new l(e,s.SPA)}},6948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n});var r=a(5155),s=a(2115),l=a(4269);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},8337:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(5155);a(2115);var s=a(4600),l=a(6948),i=a(1847);let n=(0,i.A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),o=(0,i.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),d=(0,i.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var c=a(2619),h=a.n(c);function u(){var e;let{loading:t,user:a}=(0,s.P)();if(t)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});let i=(null==a?void 0:a.registered_at)?Math.ceil(Math.abs(new Date().getTime()-a.registered_at.getTime())/864e5):0;return(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsx)(l.Zp,{children:(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{children:["Welcome, ",null==a||null==(e=a.email)?void 0:e.split("@")[0],"! \uD83D\uDC4B"]}),(0,r.jsxs)(l.BT,{className:"flex items-center gap-2",children:[(0,r.jsx)(n,{className:"h-4 w-4"}),"Member for ",i," days"]})]})}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Quick Actions"}),(0,r.jsx)(l.BT,{children:"Frequently used features"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(h(),{href:"/kybalion/docs/",className:"flex items-center gap-3 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("div",{className:"p-2 bg-primary-50 rounded-full",children:(0,r.jsx)(o,{className:"h-4 w-4 text-primary-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:"Document Library"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Access course documents"})]})]}),(0,r.jsxs)(h(),{href:"/kybalion/reader.html",className:"flex items-center gap-3 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("div",{className:"p-2 bg-primary-50 rounded-full",children:(0,r.jsx)(d,{className:"h-4 w-4 text-primary-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:"Reader"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Open The Kybalion reader"})]})]})]})})]})]})}}},e=>{e.O(0,[619,620,779,441,255,358],()=>e(e.s=5171)),_N_E=e.O()}]);