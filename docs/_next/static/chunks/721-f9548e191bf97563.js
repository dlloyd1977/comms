"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{63:(e,s,n)=>{var t=n(7260);n.o(t,"useParams")&&n.d(s,{useParams:function(){return t.useParams}}),n.o(t,"usePathname")&&n.d(s,{usePathname:function(){return t.usePathname}}),n.o(t,"useRouter")&&n.d(s,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(s,{useSearchParams:function(){return t.useSearchParams}})},721:(e,s,n)=>{n.d(s,{default:()=>d});var t=n(5155),i=n(2115),a=n(63),l=n(2619),r=n.n(l),o=n(5392);function c(e,s,n){let t=(e||"").trim(),i=(s||"").trim(),a=(n||"").trim();return t||i||a||""}function d(){let e=(0,a.usePathname)();return(0,i.useEffect)(()=>{let s=document.getElementById("menuBtn"),n=document.getElementById("menuPanel"),t=document.getElementById("menuSessionsBtn"),i=document.getElementById("menuSessionsFlyout"),a=document.getElementById("menuAuthLink"),l=document.getElementById("menuSignOutLink"),r=document.getElementById("menuChangePasswordLink"),d=document.getElementById("userDisplay"),u=(null==s?void 0:s.closest(".menu-wrapper"))||null,m=document.querySelectorAll(".menu-link.admin-only");if(!s||!n)return;let h=()=>{n.classList.add("is-hidden"),s.setAttribute("aria-expanded","false"),i&&i.classList.add("is-hidden")},y=e=>{e.preventDefault();let t=!n.classList.contains("is-hidden");n.classList.toggle("is-hidden",t),s.setAttribute("aria-expanded",String(!t)),t&&i&&i.classList.add("is-hidden")},g=e=>{if(!u)return;let s=e.target;u.contains(s)||h()},k=e=>{"Escape"===e.key&&h()},f=e=>{e.preventDefault(),i&&i.classList.toggle("is-hidden")};return s.addEventListener("click",y),document.addEventListener("click",g),document.addEventListener("keydown",k),t&&t.addEventListener("click",f),(async()=>{try{let e=await (0,o.q)(),n=e.getSupabaseClient(),{data:t}=await n.auth.getSession(),u=(null==t?void 0:t.session)?t.session.user:null;if(!u){let{data:e}=await n.auth.getUser();u=null==e?void 0:e.user}if(u){var s,n,t,i;let o=u.email||"",h=null!=(t=null==(s=u.user_metadata)?void 0:s.nickname)?t:null,y=null!=(i=null==(n=u.user_metadata)?void 0:n.first_name)?i:null,g=c(h,y,o);try{let{data:s}=await e.getSupabaseClient().from("active_members").select("nickname, first_name, group").eq("email",o).maybeSingle();(null==s?void 0:s.nickname)&&(h=s.nickname),(null==s?void 0:s.first_name)&&(y=s.first_name),g=c(h,y,o);let n=(null==s?void 0:s.group)==="admin";m.forEach(e=>{e.classList.toggle("is-hidden",!n),e.setAttribute("aria-hidden",String(!n))})}catch(e){}d&&(d.textContent=g?"Current User: ".concat(g):"",d.classList.remove("is-hidden")),a&&(a.classList.add("is-hidden"),a.setAttribute("aria-hidden","true")),r&&(r.classList.remove("is-hidden"),r.setAttribute("aria-hidden","false")),l&&(l.classList.remove("is-hidden"),l.setAttribute("aria-hidden","false"),l.style.cursor="pointer",l.onclick=async s=>{s.preventDefault();try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],s="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let n=localStorage.key(e);(null==n?void 0:n.startsWith(s))&&localStorage.removeItem(n)}}catch(e){}await e.getSupabaseClient().auth.signOut(),window.location.reload()});return}}catch(e){}d&&(d.textContent="",d.classList.add("is-hidden")),m.forEach(e=>{e.classList.add("is-hidden"),e.setAttribute("aria-hidden","true")}),a&&(a.classList.remove("is-hidden"),a.setAttribute("aria-hidden","false"),a.setAttribute("href","/auth/login?redirect=".concat(encodeURIComponent(e))),a.style.cursor="pointer",a.onclick=null),r&&(r.classList.add("is-hidden"),r.setAttribute("aria-hidden","true")),l&&(l.classList.add("is-hidden"),l.setAttribute("aria-hidden","true"),l.onclick=null)})(),()=>{s.removeEventListener("click",y),document.removeEventListener("click",g),document.removeEventListener("keydown",k),t&&t.removeEventListener("click",f)}},[e]),(0,t.jsxs)("div",{className:"menu-wrapper","data-layout-key":"menu",children:[(0,t.jsx)("span",{className:"user-display is-hidden",id:"userDisplay","data-layout-key":"user","aria-live":"polite"}),(0,t.jsx)("button",{className:"button secondary",type:"button",id:"menuBtn","aria-haspopup":"true","aria-expanded":"false","aria-controls":"menuPanel",children:"Main Menu"}),(0,t.jsxs)("div",{className:"menu-panel is-hidden",id:"menuPanel",role:"menu","aria-label":"Documents",children:[(0,t.jsxs)("div",{className:"menu-section",children:[(0,t.jsx)("p",{className:"menu-title",children:"Navigation"}),(0,t.jsx)(r(),{className:"menu-link",href:"/",children:"Home"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/",children:"Kybalion Home"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/reader.html",children:"Reader"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/",children:"Document Library"}),(0,t.jsx)(r(),{className:"menu-link",href:"/auth/login?redirect=".concat(encodeURIComponent(e)),id:"menuAuthLink",children:"Sign In / Create Account"}),(0,t.jsx)(r(),{className:"menu-link is-hidden",href:"/app/user-settings",id:"menuChangePasswordLink","aria-hidden":"true",children:"Change Password"}),(0,t.jsx)("button",{className:"menu-link is-hidden",type:"button",id:"menuSignOutLink","aria-hidden":"true",children:"Log Out"})]}),(0,t.jsxs)("div",{className:"menu-section",children:[(0,t.jsx)("p",{className:"menu-title",children:"Documents"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/general/",children:"General"}),(0,t.jsxs)("div",{className:"menu-sessions-wrapper",children:[(0,t.jsxs)("button",{className:"menu-link menu-sessions-trigger",type:"button",id:"menuSessionsBtn",children:["Sessions ",(0,t.jsx)("span",{className:"menu-arrow",children:"â–¸"})]}),(0,t.jsxs)("div",{className:"menu-sessions-flyout is-hidden",id:"menuSessionsFlyout",children:[(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-01/",children:"Session 1"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-02/",children:"Session 2"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-03/",children:"Session 3"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-04/",children:"Session 4"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-05/",children:"Session 5"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-06/",children:"Session 6"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-07/",children:"Session 7"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-08/",children:"Session 8"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-09/",children:"Session 9"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-10/",children:"Session 10"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-11/",children:"Session 11"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-12/",children:"Session 12"})]})]}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/templates/",children:"Templates"}),(0,t.jsx)(r(),{className:"menu-link admin-only is-hidden",href:"/kybalion/docs/assets/",children:"Assets"}),(0,t.jsx)(r(),{className:"menu-link admin-only is-hidden",href:"/kybalion/docs/master-docs/",children:"Master Documents"})]})]})]})}},5392:(e,s,n)=>{n.d(s,{q7:()=>l,q:()=>r,Xy:()=>o});var t=n(6620),i=function(e){return e.SERVER="server",e.SPA="spa",e}({});class a{async loginEmail(e,s){return this.client.auth.signInWithPassword({email:e,password:s})}async registerEmail(e,s){return this.client.auth.signUp({email:e,password:s})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],s="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let n=localStorage.key(e);(null==n?void 0:n.startsWith(s))&&localStorage.removeItem(n)}for(let e=sessionStorage.length-1;e>=0;e--){let n=sessionStorage.key(e);(null==n?void 0:n.startsWith(s))&&sessionStorage.removeItem(n)}}catch(e){}let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,s,n){return s=e+"/"+(s=s.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(s,n)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,s){return s=e+"/"+s,this.client.storage.from("files").remove([s])}async shareFile(e,s,n){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s=e+"/"+s,this.client.storage.from("files").createSignedUrl(s,n,{download:t})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.client.from("todo_list").select("*").range(e*s-s,e*s-1).order(n);return null!==t&&(i=i.eq("done",t)),i}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,s){this.client=e,this.clientType=s}}function l(){return(0,t.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function r(){return new a(l(),i.SPA)}async function o(){let e=l(),s=await e.auth.getSession();return s.data&&s.data.session||(window.location.href="/auth/login"),new a(e,i.SPA)}}}]);