(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[496],{5392:(e,t,s)=>{"use strict";s.d(t,{q7:()=>l,q:()=>o,Xy:()=>a});var n=s(6620),i=function(e){return e.SERVER="server",e.SPA="spa",e}({});class r{async loginEmail(e,t){return this.client.auth.signInWithPassword({email:e,password:t})}async registerEmail(e,t){return this.client.auth.signUp({email:e,password:t})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,t,s){return t=e+"/"+(t=t.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(t,s)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,t){return t=e+"/"+t,this.client.storage.from("files").remove([t])}async shareFile(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t=e+"/"+t,this.client.storage.from("files").createSignedUrl(t,s,{download:n})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.client.from("todo_list").select("*").range(e*t-t,e*t-1).order(s);return null!==n&&(i=i.eq("done",n)),i}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,t){this.client=e,this.clientType=t}}function l(){return(0,n.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function o(){return new r(l(),i.SPA)}async function a(){let e=l(),t=await e.auth.getSession();return t.data&&t.data.session||(window.location.href="/auth/login"),new r(e,i.SPA)}},7514:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var n=s(5155),i=s(2115),r=s(5392),l=s(2619),o=s.n(l);function a(){let[e,t]=(0,i.useState)(null),[s,l]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{(0,r.q7)().auth.getSession().then(e=>{var s,n;let{data:i}=e,r=i.session;if(t(null!=(n=null==r||null==(s=r.user)?void 0:s.email)?n:null),l(!0),r)try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0];localStorage.setItem("sb-".concat(e,"-auth-token"),JSON.stringify(r))}catch(e){}})},[]),s)?e?(0,n.jsx)(o(),{href:"/kybalion/reader.html",className:"rounded-full px-4 py-2 text-sm font-semibold",style:{background:"#2f5f8f",color:"#ffffff",border:"1px solid #2f5f8f"},children:"Open Reader"}):(0,n.jsx)(o(),{href:"/auth/login?redirect=/kybalion/reader.html",className:"rounded-full px-4 py-2 text-sm font-semibold",style:{background:"#2f5f8f",color:"#ffffff",border:"1px solid #2f5f8f"},children:"Sign In"}):(0,n.jsx)("span",{className:"inline-block rounded-full px-4 py-2 text-sm font-semibold",style:{background:"#2f5f8f",color:"#ffffff",border:"1px solid #2f5f8f",opacity:.6},children:"â€¦"})}},8602:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,7514))}},e=>{e.O(0,[619,620,441,255,358],()=>e(e.s=8602)),_N_E=e.O()}]);