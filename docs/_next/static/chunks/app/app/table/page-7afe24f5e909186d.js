(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{1834:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>f,L3:()=>h,c7:()=>m,lG:()=>o,rr:()=>g,zM:()=>d});var a=r(5155),s=r(2115),n=r(2165),i=r(5229),l=r(4269);let o=n.bL,d=n.l9,c=n.ZL;n.bm;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});u.displayName=n.hJ.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[s,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};m.displayName="DialogHeader";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});h.displayName=n.hE.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})});g.displayName=n.VY.displayName},3588:(e,t,r)=>{Promise.resolve().then(r.bind(r,8617))},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>o});var a=r(5155),s=r(2115),n=r(2467),i=r(3101),l=r(4269);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),s=r(5889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4600:(e,t,r)=>{"use strict";r.d(t,{GlobalProvider:()=>l,P:()=>o});var a=r(5155),s=r(2115),n=r(5392);let i=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{!async function(){try{let e=(await (0,n.Xy)()).getSupabaseClient(),{data:{user:t}}=await e.auth.getUser();if(t)d({email:t.email,id:t.id,registered_at:new Date(t.created_at)});else throw Error("User not found")}catch(e){console.error("Error loading data:",e)}finally{l(!1)}}()},[]),(0,a.jsx)(i.Provider,{value:{loading:r,user:o},children:t})}let o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useGlobal must be used within a GlobalProvider");return e}},5392:(e,t,r)=>{"use strict";r.d(t,{q7:()=>i,q:()=>l,Xy:()=>o});var a=r(6620),s=function(e){return e.SERVER="server",e.SPA="spa",e}({});class n{async loginEmail(e,t){return this.client.auth.signInWithPassword({email:e,password:t})}async registerEmail(e,t){return this.client.auth.signUp({email:e,password:t})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,t,r){return t=e+"/"+(t=t.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(t,r)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,t){return t=e+"/"+t,this.client.storage.from("files").remove([t])}async shareFile(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t=e+"/"+t,this.client.storage.from("files").createSignedUrl(t,r,{download:a})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.client.from("todo_list").select("*").range(e*t-t,e*t-1).order(r);return null!==a&&(s=s.eq("done",a)),s}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,t){this.client=e,this.clientType=t}}function i(){return(0,a.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function l(){return new n(i(),s.SPA)}async function o(){let e=i(),t=await e.auth.getSession();return t.data&&t.data.session||(window.location.href="/auth/login"),new n(e,s.SPA)}},6948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l});var a=r(5155),s=r(2115),n=r(4269);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},8332:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>o,TN:()=>d});var a=r(5155),s=r(2115),n=r(3101),i=r(4269);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:s}),r),...n})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});d.displayName="AlertDescription"},8617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(5155),s=r(2115),n=r(4600),i=r(5392),l=r(6948),o=r(8332),d=r(3998),c=r(1834),u=r(4269);let f=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});f.displayName="Input";let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});m.displayName="Textarea";let h=(0,r(1847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=r(6132),x=r(5299),p=r(2529),v=r(1360);let y=e=>{let{active:t}=e,r=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)([]);return(0,s.useEffect)(()=>{if(!t||!r.current)return;let e=r.current,a=e.getContext("2d");if(!a)return;let s=["#ffd700","#ff0000","#00ff00","#0000ff","#ff00ff"];i.current=Array.from({length:50},()=>({x:e.width/2,y:e.height/2,size:8*Math.random()+4,color:s[Math.floor(Math.random()*s.length)],speedX:(Math.random()-.5)*12,speedY:-(15*Math.random())-5,gravity:.7,rotation:360*Math.random(),rotationSpeed:(Math.random()-.5)*8}));let l=0,o=()=>{a.clearRect(0,0,e.width,e.height),i.current.forEach(e=>{a.save(),a.translate(e.x,e.y),a.rotate(e.rotation*Math.PI/180),a.fillStyle=e.color,a.fillRect(-e.size/2,-e.size/2,e.size,e.size),a.restore(),e.x+=e.speedX,e.y+=e.speedY,e.speedY+=e.gravity,e.rotation+=e.rotationSpeed}),++l<120&&(n.current=requestAnimationFrame(o))};return o(),()=>{n.current&&cancelAnimationFrame(n.current)}},[t]),(0,a.jsx)("canvas",{ref:r,className:"fixed inset-0 pointer-events-none z-50",width:window.innerWidth,height:window.innerHeight})};function b(e){let{onTaskCreated:t}=e,{user:r}=(0,n.P)(),[l,u]=(0,s.useState)(!1),[p,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(""),[w,N]=(0,s.useState)(""),[j,k]=(0,s.useState)(""),[C,S]=(0,s.useState)(!1),A=async e=>{if(e.preventDefault(),w.trim()&&(null==r?void 0:r.id))try{v(!0);let e=await (0,i.Xy)(),a={title:w.trim(),description:j.trim()||null,urgent:C,owner:r.id,done:!1},{error:s}=await e.createTask(a);if(s)throw s;N(""),k(""),S(!1),u(!1),await t()}catch(e){b("Failed to add task"),console.error("Error adding task:",e)}finally{v(!1)}};return(0,a.jsxs)(c.lG,{open:l,onOpenChange:u,children:[(0,a.jsx)(c.zM,{asChild:!0,children:(0,a.jsxs)(d.$,{className:"bg-primary-600 text-white hover:bg-primary-700",children:[(0,a.jsx)(h,{className:"h-4 w-4 mr-2"}),"Add Task"]})}),(0,a.jsxs)(c.Cf,{children:[(0,a.jsx)(c.c7,{children:(0,a.jsx)(c.L3,{children:"Create New Task"})}),y&&(0,a.jsxs)(o.Fc,{variant:"destructive",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)(o.TN,{children:y})]}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(f,{type:"text",value:w,onChange:e=>N(e.target.value),placeholder:"Task title",required:!0})}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(m,{value:j,onChange:e=>k(e.target.value),placeholder:"Task description (optional)",rows:3})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:C,onChange:e=>S(e.target.checked),className:"rounded border-gray-300 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Mark as urgent"})]}),(0,a.jsxs)(d.$,{type:"submit",disabled:p,className:"bg-primary-600 text-white hover:bg-primary-700",children:[p&&(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Task"]})]})]})]})]})}function w(){let{user:e}=(0,n.P)(),[t,r]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!0),[h,w]=(0,s.useState)(""),[N,j]=(0,s.useState)(null),[k,C]=(0,s.useState)(!1),S=(0,s.useCallback)(async()=>{try{f||u(!0);let e=await (0,i.Xy)(),{data:t,error:a}=await e.getMyTodoList(1,100,"created_at",N);if(a)throw a;r(t||[])}catch(e){w("Failed to load tasks"),console.error("Error loading tasks:",e)}finally{u(!1),m(!1)}},[N,f]);(0,s.useEffect)(()=>{(null==e?void 0:e.id)&&S()},[S,null==e?void 0:e.id]);let A=async e=>{try{let t=await (0,i.Xy)(),{error:r}=await t.removeTask(e);if(r)throw r;await S()}catch(e){w("Failed to remove task"),console.error("Error removing task:",e)}},R=async e=>{try{let t=await (0,i.Xy)(),{error:r}=await t.updateAsDone(e);if(r)throw r;C(!0),setTimeout(()=>C(!1),2e3),await S()}catch(e){w("Failed to update task"),console.error("Error updating task:",e)}};return f?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[200px]",children:(0,a.jsx)(x.A,{className:"h-8 w-8 animate-spin text-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZB,{children:"Task Management"}),(0,a.jsx)(l.BT,{children:"Manage your tasks and to-dos"})]}),(0,a.jsx)(b,{onTaskCreated:S})]}),(0,a.jsxs)(l.Wu,{children:[h&&(0,a.jsxs)(o.Fc,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)(o.TN,{children:h})]}),(0,a.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,a.jsx)(d.$,{variant:null===N?"default":"secondary",onClick:()=>j(null),size:"sm",className:null===N?"bg-primary-600 text-white hover:bg-primary-700":"",children:"All Tasks"}),(0,a.jsx)(d.$,{variant:!1===N?"default":"secondary",onClick:()=>j(!1),size:"sm",className:!1===N?"bg-primary-600 text-white hover:bg-primary-700":"",children:"Active"}),(0,a.jsx)(d.$,{variant:!0===N?"default":"secondary",onClick:()=>j(!0),size:"sm",className:!0===N?"bg-primary-600 text-white hover:bg-primary-700":"",children:"Completed"})]}),(0,a.jsxs)("div",{className:"space-y-3 relative",children:[c&&(0,a.jsx)("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center backdrop-blur-sm",children:(0,a.jsx)(x.A,{className:"h-8 w-8 animate-spin text-primary-600"})}),0===t.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No tasks found"})}):t.map(e=>(0,a.jsx)("div",{className:"p-4 border rounded-lg transition-colors ".concat(e.done?"bg-muted":"bg-card"," ").concat(e.urgent&&!e.done?"border-red-200":"border-border"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium ".concat(e.done?"line-through text-muted-foreground":""),children:e.title}),e.description&&(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),e.urgent&&!e.done&&(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs bg-red-50 text-red-600 rounded-full",children:"Urgent"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!e.done&&(0,a.jsx)(d.$,{onClick:()=>R(e.id),variant:"ghost",size:"icon",className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:(0,a.jsx)(p.A,{className:"h-5 w-5"})}),(0,a.jsx)(d.$,{onClick:()=>A(e.id),variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,a.jsx)(v.A,{className:"h-5 w-5"})})]})]})},e.id))]})]})]}),(0,a.jsx)(y,{active:k})]})}}},e=>{e.O(0,[620,779,787,441,255,358],()=>e(e.s=3588)),_N_E=e.O()}]);