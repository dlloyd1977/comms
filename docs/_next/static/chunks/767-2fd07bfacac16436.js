"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[767],{1847:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(2115);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...l,width:i,height:i,stroke:r,strokeWidth:o?24*Number(n)/Number(i):n,className:a("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:n,...o}=r;return(0,s.createElement)(i,{ref:l,iconNode:t,className:a("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...o})});return r.displayName="".concat(e),r}},2681:(e,t,r)=>{r.d(t,{default:()=>u});var s=r(5155),a=r(2115),l=r(5392),i=r(1847);let n=(0,i.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),o=(0,i.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var c=r(2619),d=r.n(c);function u(e){let{variant:t="primary"}=e,[r,i]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{let e=await (0,l.q)(),{data:{user:t}}=await e.getSupabaseClient().auth.getUser();i(!!t)}catch(e){console.error("Error checking auth status:",e)}finally{u(!1)}})()},[]),c)?null:"nav"===t?r?(0,s.jsx)(d(),{href:"/app",className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Go to Dashboard"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d(),{href:"/auth/login",className:"text-gray-600 hover:text-gray-900",children:"Login"}),(0,s.jsx)(d(),{href:"/auth/register",className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors",children:"Get Started"})]}):r?(0,s.jsxs)(d(),{href:"/app",className:"inline-flex items-center px-6 py-3 rounded-lg bg-primary-600 text-white font-medium hover:bg-primary-700 transition-colors",children:["Go to Dashboard",(0,s.jsx)(n,{className:"ml-2 h-5 w-5"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d(),{href:"/auth/register",className:"inline-flex items-center px-6 py-3 rounded-lg bg-primary-600 text-white font-medium hover:bg-primary-700 transition-colors",children:["Start Building Free",(0,s.jsx)(n,{className:"ml-2 h-5 w-5"})]}),(0,s.jsxs)(d(),{href:"#features",className:"inline-flex items-center px-6 py-3 rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:["Learn More",(0,s.jsx)(o,{className:"ml-2 h-5 w-5"})]})]})}},5392:(e,t,r)=>{r.d(t,{q7:()=>i,q:()=>n,Xy:()=>o});var s=r(6620),a=function(e){return e.SERVER="server",e.SPA="spa",e}({});class l{async loginEmail(e,t){return this.client.auth.signInWithPassword({email:e,password:t})}async registerEmail(e,t){return this.client.auth.signUp({email:e,password:t})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,t,r){return t=e+"/"+(t=t.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(t,r)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,t){return t=e+"/"+t,this.client.storage.from("files").remove([t])}async shareFile(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t=e+"/"+t,this.client.storage.from("files").createSignedUrl(t,r,{download:s})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.client.from("todo_list").select("*").range(e*t-t,e*t-1).order(r);return null!==s&&(a=a.eq("done",s)),a}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,t){this.client=e,this.clientType=t}}function i(){return(0,s.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function n(){return new l(i(),a.SPA)}async function o(){let e=i(),t=await e.auth.getSession();return t.data&&t.data.session||(window.location.href="/auth/login"),new l(e,a.SPA)}},7439:(e,t,r)=>{r.d(t,{default:()=>n});var s=r(5155),a=r(2115),l=r(5392);let i="kybalion-docs";function n(e){let{prefix:t}=e,[r,n]=(0,a.useState)([]),[o,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(null),p=(0,a.useMemo)(()=>(0,l.q7)(),[]);return(0,a.useEffect)(()=>{let e=!0,r=async()=>{try{var t,r;let{data:s}=await p.auth.getUser(),a=(null==(r=s.user)||null==(t=r.email)?void 0:t.toLowerCase())||"";if(!a){e&&m(null);return}let{data:l,error:i}=await p.from("active_members").select("status, group").eq("email",a).maybeSingle();if(i)throw i;e&&m({email:a,status:(null==l?void 0:l.status)||null,group:(null==l?void 0:l.group)||null})}catch(e){console.error("Member status error:",e)}};return(async()=>{c(!0),u(null);try{let{data:r,error:s}=await p.storage.from(i).list(t,{limit:200,sortBy:{column:"name",order:"asc"}});if(s)throw s;e&&n(r||[])}catch(t){e&&u("Unable to load documents."),console.error("Docs list error:",t)}finally{e&&c(!1)}})(),r(),()=>{e=!1}},[p,t]),(0,s.jsxs)("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Storage"}),(0,s.jsx)("h2",{className:"mt-2 text-xl font-semibold text-slate-900",children:"Documents"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-slate-600",children:["Files are loaded from Supabase bucket ",i,"."]})]}),(0,s.jsx)("div",{className:"text-sm text-slate-600",children:(null==h?void 0:h.email)?(0,s.jsxs)("div",{className:"rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-slate-700",children:["Signed in as ",h.email]}):(0,s.jsx)("div",{className:"rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-slate-700",children:"Public view"})})]}),o?(0,s.jsx)("p",{className:"mt-6 text-sm text-slate-600",children:"Loading documents..."}):d?(0,s.jsx)("p",{className:"mt-6 text-sm text-red-600",children:d}):0===r.length?(0,s.jsx)("p",{className:"mt-6 text-sm text-slate-600",children:"No files found in this folder."}):(0,s.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full text-left text-sm text-slate-700",children:[(0,s.jsx)("thead",{className:"border-b border-slate-200 text-xs uppercase tracking-[0.2em] text-slate-500",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-2 pr-4",children:"Name"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Last updated"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Size"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-slate-100",children:r.map(e=>{var t,r;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"py-3 pr-4 font-medium text-slate-900",children:e.name}),(0,s.jsx)("td",{className:"py-3 pr-4 text-slate-600",children:(e=>{if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})(e.updated_at)}),(0,s.jsx)("td",{className:"py-3 pr-4 text-slate-600",children:(r=null==(t=e.metadata)?void 0:t.size)||0===r?r<1024?"".concat(r," B"):r<1048576?"".concat(Math.round(r/1024)," KB"):"".concat((r/1048576).toFixed(1)," MB"):"-"})]},e.name)})})]})})]})}}}]);