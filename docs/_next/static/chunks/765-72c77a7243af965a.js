(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{63:(e,t,s)=>{"use strict";var n=s(7260);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},1765:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,6113)),Promise.resolve().then(s.bind(s,5245))},5245:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var n=s(5155),a=s(2115),l=s(5392);function r(e,t,s){let n=(e||"").trim(),a=(t||"").trim(),l=(s||"").trim();return n||a||l||""}function o(e){let{className:t}=e,[s,o]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e=!0;return(async()=>{try{var t,s,n,a;let i=await (0,l.createSPASassClient)(),{data:{user:c}}=await i.getSupabaseClient().auth.getUser();if(!c)return;let u=c.email||"",d=null!=(n=null==(t=c.user_metadata)?void 0:t.nickname)?n:null,m=null!=(a=null==(s=c.user_metadata)?void 0:s.first_name)?a:null,h=r(d,m,u);try{let{data:e}=await i.getSupabaseClient().from("active_members").select("nickname, first_name").eq("email",u).maybeSingle();(null==e?void 0:e.nickname)&&(d=e.nickname),(null==e?void 0:e.first_name)&&(m=e.first_name),h=r(d,m,u)}catch(e){}e&&o(h||null)}catch(e){}})(),()=>{e=!1}},[]),s)?(0,n.jsxs)("span",{className:t||"text-sm font-semibold text-slate-700",children:["Hi ",s]}):null}},5392:(e,t,s)=>{"use strict";s.d(t,{q:()=>r,createSPASassClient:()=>o,X:()=>i});var n=s(6620),a=function(e){return e.SERVER="server",e.SPA="spa",e}({});class l{async loginEmail(e,t){return this.client.auth.signInWithPassword({email:e,password:t})}async registerEmail(e,t){return this.client.auth.signUp({email:e,password:t})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],t="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let s=localStorage.key(e);(null==s?void 0:s.startsWith(t))&&localStorage.removeItem(s)}for(let e=sessionStorage.length-1;e>=0;e--){let s=sessionStorage.key(e);(null==s?void 0:s.startsWith(t))&&sessionStorage.removeItem(s)}}catch(e){}let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,t,s){return t=e+"/"+(t=t.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(t,s)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,t){return t=e+"/"+t,this.client.storage.from("files").remove([t])}async shareFile(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t=e+"/"+t,this.client.storage.from("files").createSignedUrl(t,s,{download:n})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.client.from("todo_list").select("*").range(e*t-t,e*t-1).order(s);return null!==n&&(a=a.eq("done",n)),a}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,t){this.client=e,this.clientType=t}}function r(){return(0,n.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function o(){return new l(r(),a.SPA)}async function i(){let e=r(),t=await e.auth.getSession();return t.data&&t.data.session||(window.location.href="/auth/login"),new l(e,a.SPA)}},6113:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var n=s(5155),a=s(2115),l=s(63),r=s(2619),o=s.n(r);let i=[{href:"/",label:"Home"},{href:"/kybalion/",label:"Kybalion Home"},{href:"/kybalion/reader.html",label:"Reader"},{href:"/kybalion/docs/",label:"Document Library"}],c=Array.from({length:12},(e,t)=>({href:"/kybalion/docs/session-".concat(String(t+1).padStart(2,"0"),"/"),label:"Session ".concat(t+1)})),u=[{href:"/kybalion/docs/templates/",label:"Templates"},{href:"/kybalion/docs/assets/",label:"Assets"},{href:"/kybalion/docs/master-docs/",label:"Master Documents"}],d="rounded-lg px-2 py-1.5 text-sm font-semibold no-underline hover:bg-[#f1f5fb] block",m={color:"#1f1c1a"},h={color:"#888"};function f(){let[e,t]=(0,a.useState)(!1),[r,f]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),g=(0,a.useRef)(null),y=(0,a.useRef)(null),x=(0,l.usePathname)();(0,a.useEffect)(()=>{(async()=>{try{let{createSPASassClient:e}=await Promise.resolve().then(s.bind(s,5392)),t=await e(),{data:{user:n}}=await t.getSupabaseClient().auth.getUser();b(!!n)}catch(e){}})()},[]),(0,a.useEffect)(()=>{if(!e)return;let s=e=>{g.current&&!g.current.contains(e.target)&&(t(!1),f(!1))},n=e=>{"Escape"===e.key&&(t(!1),f(!1))};return document.addEventListener("mousedown",s),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("keydown",n)}},[e]);let v=()=>{y.current&&clearTimeout(y.current),f(!0)},w=()=>{y.current=setTimeout(()=>f(!1),200)},S=async()=>{try{try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],t="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let s=localStorage.key(e);(null==s?void 0:s.startsWith(t))&&localStorage.removeItem(s)}}catch(e){}let{createSPASassClient:e}=await Promise.resolve().then(s.bind(s,5392)),n=await e();await n.getSupabaseClient().auth.signOut(),b(!1),t(!1),window.location.reload()}catch(e){t(!1)}};return(0,n.jsxs)("div",{ref:g,className:"relative inline-flex",children:[(0,n.jsx)("button",{type:"button",className:"rounded-full border px-4 py-2 text-sm font-medium",style:{background:"#fff",color:"#2f5f8f",borderColor:"#2f5f8f"},"aria-haspopup":"true","aria-expanded":e,onClick:()=>t(e=>!e),children:"Main Menu"}),e&&(0,n.jsxs)("div",{className:"absolute right-0 z-[100] mt-2 max-h-[70vh] min-w-[240px] overflow-visible rounded-xl border bg-white p-3 shadow-lg",style:{top:"calc(100% + 4px)",borderColor:"#e2ddd7"},role:"menu",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{className:"px-2 text-[0.7rem] font-semibold uppercase tracking-[0.12em]",style:h,children:"Navigation"}),i.map(e=>{let{href:s,label:a}=e;return(0,n.jsx)(o(),{href:s,className:d,style:m,onClick:()=>t(!1),children:a},s)}),p?(0,n.jsx)("button",{type:"button",className:"rounded-lg px-2 py-1.5 text-left text-sm font-semibold hover:bg-[#f1f5fb]",style:m,onClick:S,children:"Log Out"}):(0,n.jsx)(o(),{href:"/auth/login?redirect=".concat(encodeURIComponent(x)),className:d,style:m,onClick:()=>t(!1),children:"Sign In"})]}),(0,n.jsx)("hr",{className:"my-2 border-t",style:{borderColor:"#e2ddd7"}}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{className:"px-2 text-[0.7rem] font-semibold uppercase tracking-[0.12em]",style:h,children:"Documents"}),(0,n.jsx)(o(),{href:"/kybalion/docs/general/",className:d,style:m,onClick:()=>t(!1),children:"General"}),(0,n.jsxs)("div",{className:"relative",onMouseEnter:v,onMouseLeave:w,children:[(0,n.jsxs)("button",{type:"button",className:"flex w-full items-center justify-between rounded-lg px-2 py-1.5 text-left text-sm font-semibold hover:bg-[#f1f5fb]",style:m,onClick:()=>f(e=>!e),children:["Sessions",(0,n.jsx)("span",{className:"text-xs",style:h,children:"â–¸"})]}),r&&(0,n.jsx)("div",{className:"absolute z-[110] min-w-[160px] rounded-xl border bg-white p-2 shadow-lg",style:{top:0,right:"calc(100% + 6px)",borderColor:"#e2ddd7"},onMouseEnter:v,onMouseLeave:w,children:c.map(e=>{let{href:s,label:a}=e;return(0,n.jsx)(o(),{href:s,className:"block rounded-lg px-3 py-1.5 text-sm font-semibold no-underline hover:bg-[#f1f5fb]",style:m,onClick:()=>{t(!1),f(!1)},children:a},s)})})]}),u.map(e=>{let{href:s,label:a}=e;return(0,n.jsx)(o(),{href:s,className:d,style:m,onClick:()=>t(!1),children:a},s)})]})]})]})}}}]);