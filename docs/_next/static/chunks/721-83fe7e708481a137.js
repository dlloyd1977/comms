"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[721],{63:(e,s,n)=>{var t=n(7260);n.o(t,"useParams")&&n.d(s,{useParams:function(){return t.useParams}}),n.o(t,"usePathname")&&n.d(s,{usePathname:function(){return t.usePathname}}),n.o(t,"useRouter")&&n.d(s,{useRouter:function(){return t.useRouter}}),n.o(t,"useSearchParams")&&n.d(s,{useSearchParams:function(){return t.useSearchParams}})},721:(e,s,n)=>{n.d(s,{default:()=>d});var t=n(5155),i=n(2115),a=n(63),l=n(2619),r=n.n(l),o=n(5392);function c(e,s,n){let t=(e||"").trim(),i=(s||"").trim(),a=(n||"").trim();return t||i||a||""}function d(){let e=(0,a.usePathname)();return(0,i.useEffect)(()=>{let e=document.getElementById("menuBtn"),s=document.getElementById("menuPanel"),n=document.getElementById("menuSessionsBtn"),t=document.getElementById("menuSessionsFlyout"),i=document.getElementById("menuAuthLink"),a=document.getElementById("userDisplay"),l=(null==e?void 0:e.closest(".menu-wrapper"))||null,r=document.querySelectorAll(".menu-link.admin-only");if(!e||!s)return;let d=()=>{s.classList.add("is-hidden"),e.setAttribute("aria-expanded","false"),t&&t.classList.add("is-hidden")},u=n=>{n.preventDefault();let i=!s.classList.contains("is-hidden");s.classList.toggle("is-hidden",i),e.setAttribute("aria-expanded",String(!i)),i&&t&&t.classList.add("is-hidden")},m=e=>{if(!l)return;let s=e.target;l.contains(s)||d()},h=e=>{"Escape"===e.key&&d()},y=e=>{e.preventDefault(),t&&t.classList.toggle("is-hidden")};return e.addEventListener("click",u),document.addEventListener("click",m),document.addEventListener("keydown",h),n&&n.addEventListener("click",y),(async()=>{try{let l=await (0,o.q)(),{data:{user:d}}=await l.getSupabaseClient().auth.getUser();if(d){var e,s,n,t;let o=d.email||"",u=null!=(n=null==(e=d.user_metadata)?void 0:e.nickname)?n:null,m=null!=(t=null==(s=d.user_metadata)?void 0:s.first_name)?t:null,h=c(u,m,o);try{let{data:e}=await l.getSupabaseClient().from("active_members").select("nickname, first_name, group").eq("email",o).maybeSingle();(null==e?void 0:e.nickname)&&(u=e.nickname),(null==e?void 0:e.first_name)&&(m=e.first_name),h=c(u,m,o);let s=(null==e?void 0:e.group)==="admin";r.forEach(e=>{e.classList.toggle("is-hidden",!s),e.setAttribute("aria-hidden",String(!s))})}catch(e){}a&&(a.textContent=h?"Current User: ".concat(h):"",a.classList.remove("is-hidden")),i&&(i.textContent="Log Out",i.removeAttribute("href"),i.style.cursor="pointer",i.onclick=async e=>{e.preventDefault();try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],s="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let n=localStorage.key(e);(null==n?void 0:n.startsWith(s))&&localStorage.removeItem(n)}}catch(e){}await l.getSupabaseClient().auth.signOut(),window.location.reload()});return}}catch(e){}a&&(a.textContent="",a.classList.add("is-hidden")),r.forEach(e=>{e.classList.add("is-hidden"),e.setAttribute("aria-hidden","true")}),i&&(i.textContent="Sign In",i.setAttribute("href","/auth/login"),i.style.cursor="pointer",i.onclick=null)})(),()=>{e.removeEventListener("click",u),document.removeEventListener("click",m),document.removeEventListener("keydown",h),n&&n.removeEventListener("click",y)}},[e]),(0,t.jsxs)("div",{className:"menu-wrapper","data-layout-key":"menu",children:[(0,t.jsx)("span",{className:"user-display is-hidden",id:"userDisplay","data-layout-key":"user","aria-live":"polite"}),(0,t.jsx)("button",{className:"button secondary",type:"button",id:"menuBtn","aria-haspopup":"true","aria-expanded":"false","aria-controls":"menuPanel",children:"Main Menu"}),(0,t.jsxs)("div",{className:"menu-panel is-hidden",id:"menuPanel",role:"menu","aria-label":"Documents",children:[(0,t.jsxs)("div",{className:"menu-section",children:[(0,t.jsx)("p",{className:"menu-title",children:"Navigation"}),(0,t.jsx)(r(),{className:"menu-link",href:"/",children:"Home"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/",children:"Kybalion Home"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/reader.html",children:"Reader"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/",children:"Document Library"}),(0,t.jsx)(r(),{className:"menu-link",href:"/auth/login",id:"menuAuthLink",children:"Sign In"})]}),(0,t.jsxs)("div",{className:"menu-section",children:[(0,t.jsx)("p",{className:"menu-title",children:"Documents"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/general/",children:"General"}),(0,t.jsxs)("div",{className:"menu-sessions-wrapper",children:[(0,t.jsxs)("button",{className:"menu-link menu-sessions-trigger",type:"button",id:"menuSessionsBtn",children:["Sessions ",(0,t.jsx)("span",{className:"menu-arrow",children:"â–¸"})]}),(0,t.jsxs)("div",{className:"menu-sessions-flyout is-hidden",id:"menuSessionsFlyout",children:[(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-01/",children:"Session 1"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-02/",children:"Session 2"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-03/",children:"Session 3"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-04/",children:"Session 4"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-05/",children:"Session 5"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-06/",children:"Session 6"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-07/",children:"Session 7"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-08/",children:"Session 8"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-09/",children:"Session 9"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-10/",children:"Session 10"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-11/",children:"Session 11"}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/session-12/",children:"Session 12"})]})]}),(0,t.jsx)(r(),{className:"menu-link",href:"/kybalion/docs/templates/",children:"Templates"}),(0,t.jsx)(r(),{className:"menu-link admin-only is-hidden",href:"/kybalion/docs/assets/",children:"Assets"}),(0,t.jsx)(r(),{className:"menu-link admin-only is-hidden",href:"/kybalion/docs/master-docs/",children:"Master Documents"})]})]})]})}},5392:(e,s,n)=>{n.d(s,{q7:()=>l,q:()=>r,Xy:()=>o});var t=n(6620),i=function(e){return e.SERVER="server",e.SPA="spa",e}({});class a{async loginEmail(e,s){return this.client.auth.signInWithPassword({email:e,password:s})}async registerEmail(e,s){return this.client.auth.signUp({email:e,password:s})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],s="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let n=localStorage.key(e);(null==n?void 0:n.startsWith(s))&&localStorage.removeItem(n)}for(let e=sessionStorage.length-1;e>=0;e--){let n=sessionStorage.key(e);(null==n?void 0:n.startsWith(s))&&sessionStorage.removeItem(n)}}catch(e){}let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,s,n){return s=e+"/"+(s=s.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(s,n)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,s){return s=e+"/"+s,this.client.storage.from("files").remove([s])}async shareFile(e,s,n){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s=e+"/"+s,this.client.storage.from("files").createSignedUrl(s,n,{download:t})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.client.from("todo_list").select("*").range(e*s-s,e*s-1).order(n);return null!==t&&(i=i.eq("done",t)),i}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,s){this.client=e,this.clientType=s}}function l(){return(0,t.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function r(){return new a(l(),i.SPA)}async function o(){let e=l(),s=await e.auth.getSession();return s.data&&s.data.session||(window.location.href="/auth/login"),new a(e,i.SPA)}}}]);