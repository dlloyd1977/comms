(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{1834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>f,L3:()=>h,c7:()=>m,lG:()=>o,rr:()=>g,zM:()=>d});var r=a(5155),s=a(2115),n=a(2165),i=a(5229),l=a(4269);let o=n.bL,d=n.l9,c=n.ZL;n.bm;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=n.hJ.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=n.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});h.displayName=n.hE.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=n.VY.displayName},3588:(e,t,a)=>{Promise.resolve().then(a.bind(a,8617))},3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var r=a(5155),s=a(2115),n=a(2467),i=a(3101),l=a(4269);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:a})),ref:t,...c})});d.displayName="Button"},4269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2821),s=a(5889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4600:(e,t,a)=>{"use strict";a.d(t,{GlobalProvider:()=>l,P:()=>o});var r=a(5155),s=a(2115),n=a(5392);let i=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{!async function(){try{let l=(await (0,n.Xy)()).getSupabaseClient(),{data:{user:o}}=await l.auth.getUser();if(o){var e,t,a,r,s,i;let n=o.email,c=((null==(e=o.user_metadata)?void 0:e.nickname)||"").trim()||((null==(t=o.user_metadata)?void 0:t.first_name)||"").trim()||n,u=null!=(s=null==(a=o.user_metadata)?void 0:a.first_name)?s:null,f=null!=(i=null==(r=o.user_metadata)?void 0:r.nickname)?i:null;try{let{data:e}=await l.from("active_members").select("nickname, first_name").eq("email",n).maybeSingle();(null==e?void 0:e.nickname)&&(f=e.nickname),(null==e?void 0:e.first_name)&&(u=e.first_name),c=(f||"").trim()||(u||"").trim()||n}catch(e){console.warn("Profile lookup failed:",e)}d({email:n,id:o.id,registered_at:new Date(o.created_at),first_name:u,nickname:f,display_name:c})}else throw Error("User not found")}catch(e){console.error("Error loading data:",e)}finally{l(!1)}}()},[]),(0,r.jsx)(i.Provider,{value:{loading:a,user:o},children:t})}let o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useGlobal must be used within a GlobalProvider");return e}},5392:(e,t,a)=>{"use strict";a.d(t,{q7:()=>i,q:()=>l,Xy:()=>o});var r=a(6620),s=function(e){return e.SERVER="server",e.SPA="spa",e}({});class n{async loginEmail(e,t){return this.client.auth.signInWithPassword({email:e,password:t})}async registerEmail(e,t){return this.client.auth.signUp({email:e,password:t})}async exchangeCodeForSession(e){return this.client.auth.exchangeCodeForSession(e)}async resendVerificationEmail(e){return this.client.auth.resend({email:e,type:"signup"})}async logout(){try{let e=new URL("https://xcopajcpimrsqcqhydug.supabase.co").host.split(".")[0],t="sb-".concat(e,"-");for(let e=localStorage.length-1;e>=0;e--){let a=localStorage.key(e);(null==a?void 0:a.startsWith(t))&&localStorage.removeItem(a)}for(let e=sessionStorage.length-1;e>=0;e--){let a=sessionStorage.key(e);(null==a?void 0:a.startsWith(t))&&sessionStorage.removeItem(a)}}catch(e){}let{error:e}=await this.client.auth.signOut({scope:"local"});if(e)throw e;"spa"===this.clientType&&(window.location.href="/auth/login")}async uploadFile(e,t,a){return t=e+"/"+(t=t.replace(/[^0-9a-zA-Z!\-_.*'()]/g,"_")),this.client.storage.from("files").upload(t,a)}async getFiles(e){return this.client.storage.from("files").list(e)}async deleteFile(e,t){return t=e+"/"+t,this.client.storage.from("files").remove([t])}async shareFile(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t=e+"/"+t,this.client.storage.from("files").createSignedUrl(t,a,{download:r})}async getMyTodoList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.client.from("todo_list").select("*").range(e*t-t,e*t-1).order(a);return null!==r&&(s=s.eq("done",r)),s}async createTask(e){return this.client.from("todo_list").insert(e)}async removeTask(e){return this.client.from("todo_list").delete().eq("id",e)}async updateAsDone(e){return this.client.from("todo_list").update({done:!0}).eq("id",e)}getSupabaseClient(){return this.client}constructor(e,t){this.client=e,this.clientType=t}}function i(){return(0,r.createBrowserClient)("https://xcopajcpimrsqcqhydug.supabase.co","sb_publishable_pGN0njb-9XysERIUFiYtPg_NbAQuZGT")}async function l(){return new n(i(),s.SPA)}async function o(){let e=i(),t=await e.auth.getSession();return t.data&&t.data.session||(window.location.href="/auth/login"),new n(e,s.SPA)}},6948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l});var r=a(5155),s=a(2115),n=a(4269);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},8332:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>o,TN:()=>d});var r=a(5155),s=a(2115),n=a(3101),i=a(4269);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:s}),a),...n})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...s})}).displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...s})});d.displayName="AlertDescription"},8617:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(5155),s=a(2115),n=a(4600),i=a(5392),l=a(6948),o=a(8332),d=a(3998),c=a(1834),u=a(4269);let f=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,u.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});f.displayName="Input";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});m.displayName="Textarea";let h=(0,a(1847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=a(6132),p=a(5299),x=a(2529),v=a(1360);let y=e=>{let{active:t}=e,a=(0,s.useRef)(null),n=(0,s.useRef)(null),i=(0,s.useRef)([]);return(0,s.useEffect)(()=>{if(!t||!a.current)return;let e=a.current,r=e.getContext("2d");if(!r)return;let s=["#ffd700","#ff0000","#00ff00","#0000ff","#ff00ff"];i.current=Array.from({length:50},()=>({x:e.width/2,y:e.height/2,size:8*Math.random()+4,color:s[Math.floor(Math.random()*s.length)],speedX:(Math.random()-.5)*12,speedY:-(15*Math.random())-5,gravity:.7,rotation:360*Math.random(),rotationSpeed:(Math.random()-.5)*8}));let l=0,o=()=>{r.clearRect(0,0,e.width,e.height),i.current.forEach(e=>{r.save(),r.translate(e.x,e.y),r.rotate(e.rotation*Math.PI/180),r.fillStyle=e.color,r.fillRect(-e.size/2,-e.size/2,e.size,e.size),r.restore(),e.x+=e.speedX,e.y+=e.speedY,e.speedY+=e.gravity,e.rotation+=e.rotationSpeed}),++l<120&&(n.current=requestAnimationFrame(o))};return o(),()=>{n.current&&cancelAnimationFrame(n.current)}},[t]),(0,r.jsx)("canvas",{ref:a,className:"fixed inset-0 pointer-events-none z-50",width:window.innerWidth,height:window.innerHeight})};function b(e){let{onTaskCreated:t}=e,{user:a}=(0,n.P)(),[l,u]=(0,s.useState)(!1),[x,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(""),[w,N]=(0,s.useState)(""),[j,k]=(0,s.useState)(""),[C,S]=(0,s.useState)(!1),_=async e=>{if(e.preventDefault(),w.trim()&&(null==a?void 0:a.id))try{v(!0);let e=await (0,i.Xy)(),r={title:w.trim(),description:j.trim()||null,urgent:C,owner:a.id,done:!1},{error:s}=await e.createTask(r);if(s)throw s;N(""),k(""),S(!1),u(!1),await t()}catch(e){b("Failed to add task"),console.error("Error adding task:",e)}finally{v(!1)}};return(0,r.jsxs)(c.lG,{open:l,onOpenChange:u,children:[(0,r.jsx)(c.zM,{asChild:!0,children:(0,r.jsxs)(d.$,{className:"bg-primary-600 text-white hover:bg-primary-700",children:[(0,r.jsx)(h,{className:"h-4 w-4 mr-2"}),"Add Task"]})}),(0,r.jsxs)(c.Cf,{children:[(0,r.jsx)(c.c7,{children:(0,r.jsx)(c.L3,{children:"Create New Task"})}),y&&(0,r.jsxs)(o.Fc,{variant:"destructive",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)(o.TN,{children:y})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(f,{type:"text",value:w,onChange:e=>N(e.target.value),placeholder:"Task title",required:!0})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(m,{value:j,onChange:e=>k(e.target.value),placeholder:"Task description (optional)",rows:3})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:C,onChange:e=>S(e.target.checked),className:"rounded border-gray-300 focus:ring-primary-500"}),(0,r.jsx)("span",{className:"text-sm",children:"Mark as urgent"})]}),(0,r.jsxs)(d.$,{type:"submit",disabled:x,className:"bg-primary-600 text-white hover:bg-primary-700",children:[x&&(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Task"]})]})]})]})]})}function w(){let{user:e}=(0,n.P)(),[t,a]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!0),[h,w]=(0,s.useState)(""),[N,j]=(0,s.useState)(null),[k,C]=(0,s.useState)(!1),S=(0,s.useCallback)(async()=>{try{f||u(!0);let e=await (0,i.Xy)(),{data:t,error:r}=await e.getMyTodoList(1,100,"created_at",N);if(r)throw r;a(t||[])}catch(e){w("Failed to load tasks"),console.error("Error loading tasks:",e)}finally{u(!1),m(!1)}},[N,f]);(0,s.useEffect)(()=>{(null==e?void 0:e.id)&&S()},[S,null==e?void 0:e.id]);let _=async e=>{try{let t=await (0,i.Xy)(),{error:a}=await t.removeTask(e);if(a)throw a;await S()}catch(e){w("Failed to remove task"),console.error("Error removing task:",e)}},R=async e=>{try{let t=await (0,i.Xy)(),{error:a}=await t.updateAsDone(e);if(a)throw a;C(!0),setTimeout(()=>C(!1),2e3),await S()}catch(e){w("Failed to update task"),console.error("Error updating task:",e)}};return f?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[200px]",children:(0,r.jsx)(p.A,{className:"h-8 w-8 animate-spin text-primary-600"})}):(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.ZB,{children:"Task Management"}),(0,r.jsx)(l.BT,{children:"Manage your tasks and to-dos"})]}),(0,r.jsx)(b,{onTaskCreated:S})]}),(0,r.jsxs)(l.Wu,{children:[h&&(0,r.jsxs)(o.Fc,{variant:"destructive",className:"mb-6",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)(o.TN,{children:h})]}),(0,r.jsxs)("div",{className:"mb-6 flex gap-2",children:[(0,r.jsx)(d.$,{variant:null===N?"default":"secondary",onClick:()=>j(null),size:"sm",className:null===N?"bg-primary-600 text-white hover:bg-primary-700":"",children:"All Tasks"}),(0,r.jsx)(d.$,{variant:!1===N?"default":"secondary",onClick:()=>j(!1),size:"sm",className:!1===N?"bg-primary-600 text-white hover:bg-primary-700":"",children:"Active"}),(0,r.jsx)(d.$,{variant:!0===N?"default":"secondary",onClick:()=>j(!0),size:"sm",className:!0===N?"bg-primary-600 text-white hover:bg-primary-700":"",children:"Completed"})]}),(0,r.jsxs)("div",{className:"space-y-3 relative",children:[c&&(0,r.jsx)("div",{className:"absolute inset-0 bg-background/50 flex items-center justify-center backdrop-blur-sm",children:(0,r.jsx)(p.A,{className:"h-8 w-8 animate-spin text-primary-600"})}),0===t.length?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No tasks found"})}):t.map(e=>(0,r.jsx)("div",{className:"p-4 border rounded-lg transition-colors ".concat(e.done?"bg-muted":"bg-card"," ").concat(e.urgent&&!e.done?"border-red-200":"border-border"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-medium ".concat(e.done?"line-through text-muted-foreground":""),children:e.title}),e.description&&(0,r.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),e.urgent&&!e.done&&(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs bg-red-50 text-red-600 rounded-full",children:"Urgent"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!e.done&&(0,r.jsx)(d.$,{onClick:()=>R(e.id),variant:"ghost",size:"icon",className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:(0,r.jsx)(x.A,{className:"h-5 w-5"})}),(0,r.jsx)(d.$,{onClick:()=>_(e.id),variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:(0,r.jsx)(v.A,{className:"h-5 w-5"})})]})]})},e.id))]})]})]}),(0,r.jsx)(y,{active:k})]})}}},e=>{e.O(0,[620,779,787,441,255,358],()=>e(e.s=3588)),_N_E=e.O()}]);